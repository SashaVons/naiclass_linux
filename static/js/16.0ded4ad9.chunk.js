(this["webpackJsonpbairro-admin"]=this["webpackJsonpbairro-admin"]||[]).push([[16],{173:function(e,t,r){"use strict";r.d(t,"f",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return j})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return b})),r.d(t,"a",(function(){return p})),r.d(t,"g",(function(){return h}));var c=r(313),n=(r(314),r(315),r(316)),i=r(317),a=r(327),s=r(326),o=r(335),d=r(331),l=function(e){return"string"===typeof e?Object(c.a)(e):e},u=function(e,t){return Object(n.a)(l(e),l(t))},j=function(e,t){return Object(i.a)(l(e),l(t))},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return Object(a.a)(l(e),"yyyy".concat(t,"MM").concat(t,"dd"))},b=function(){return Object(s.a)(Object(a.a)(new Date,"yyyy-MM-dd"),"yyyy-MM-dd",new Date)},f=function(e){return Object(d.a)(e,"Asia/Tokyo")},p=function(e,t){var r=Object(o.a)(f(e),f(t));return h(r)},h=function(e){return[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}},218:function(e,t,r){},274:function(e,t,r){},330:function(e,t,r){"use strict";r.r(t);var c=r(41),n=r(15),i=r(5),a=r(51),s=r(21),o=r(19),d=(r(218),r(29)),l=r(173),u=r(260),j=r(74),O=r(4),b=r.n(O),f=r(52),p=r(2),h=r(10),m=r(335),v=function(e){var t=e.start,r=e.end,n=Object(i.useState)([]),a=Object(c.a)(n,2),s=a[0],o=a[1],d=Object(i.useState)(!0),u=Object(c.a)(d,2),j=u[0],O=u[1],v=function(e,t){var r=0,c=t.map((function(t){if("picker"===e.type&&!(null===t||void 0===t?void 0:t.dateOfAccepted))return Object(p.a)(Object(p.a)({},t),{},{timeOfProccessed:null});if("dispatcher"===e.type&&!(null===t||void 0===t?void 0:t.dateOfClose))return Object(p.a)(Object(p.a)({},t),{},{timeOfProccessed:null});var c="picker"===e.type?Object(l.f)(t.dateOfAccepted):Object(l.f)(t.dateOfClose),n="picker"===e.type?Object(l.f)(t.date):Object(l.f)(t.dateOfAccepted),i=Object(l.a)(Object(l.f)(t.dateOfAccepted),Object(l.f)(t.date));return r+=Object(m.a)(c,n),Object(p.a)(Object(p.a)({},t),{},{timeOfProccessed:i})}));return{avg:Object(l.g)(Number((r/t.length).toFixed(0))),orders:c}},y=Object(i.useCallback)(Object(f.a)(b.a.mark((function e(){var c,n,i,a,s,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("additional_users").where("type","in",["dispatcher","picker"]).get();case 2:return c=e.sent,e.next=5,h.b.collection("orders").get();case 5:n=e.sent,i=c.docs.map((function(e){return e.data()})),a=n.docs.map((function(e){return Object(p.a)({_id:e.id},e.data())})),s=a.filter((function(e){var c=Object(l.f)(e.date);return Object(l.b)(c,t)&&Object(l.c)(c,r)})),console.log("Date_Orders:",s),s.map((function(e){return 1507===e.orderNumber&&console.log(e)})),d=i.map((function(e){var t,r="picker"===e.type?s.filter((function(t){var r;return(null===t||void 0===t||null===(r=t.pickedBy)||void 0===r?void 0:r.id)===e.userId})):s.filter((function(t){var r;return(null===t||void 0===t||null===(r=t.deliveredBy)||void 0===r?void 0:r.id)===e.userId})),c=v(e,r);return{id:e.userId,name:null!==(t=e.name)&&void 0!==t?t:"Name not found",type:e.type,avg:r.length?c.avg:"00:00",orders:c.orders}})),o(d),O(!1);case 14:case"end":return e.stop()}}),e)}))),[t,r]);return Object(i.useEffect)((function(){y(),console.log("123123")}),[t]),{loading:j,employees:s,couriers:s.filter((function(e){return"dispatcher"===e.type})),pickers:s.filter((function(e){return"picker"===e.type}))}},y=(r(274),function(e){var t=e.title,r=e.employees,c=Object(o.g)();return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"Employee-Table-Title",children:t}),Object(n.jsxs)("table",{className:"Orders-Table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Avg. time"}),Object(n.jsx)("th",{children:"Orders"})]})}),Object(n.jsx)("tbody",{children:r.map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.name}),Object(n.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.avg}),Object(n.jsxs)("td",{className:"Orders-Table-Title",align:"left",children:[e.orders.map((function(e){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("div",{style:{display:"flex",textDecoration:"underline",cursor:"pointer",flexDirection:"row"},onMouseDown:function(t){return 1===t.button&&window.open("/cabinet/orders/".concat(e._id),"_blank")},onClick:function(){return c.push("/cabinet/orders/".concat(e._id))},children:e.orderNumber}),Object(n.jsxs)("div",{style:{marginLeft:5},children:["(Time: ",e.timeOfProccessed,")"]})]})})),!e.orders.length&&Object(n.jsx)("p",{style:{color:"lightgray"},children:"Not found"})]})]})})}))})]})]})});t.default=Object(a.b)((function(e){return{orders:e.orders.orders}}),(function(e){return{fetchAllOrders:function(){return e(Object(d.a)())},fetchDeleteCategory:function(t){return e(Object(s.c)(t))}}}))((function(e){e.orders,e.fetchAllOrders,e.fetchDeleteCategory,Object(o.i)(),Object(o.g)();var t=Object(i.useState)(Object(l.e)()),r=Object(c.a)(t,2),a=r[0],s=r[1],d=Object(i.useState)(Object(u.a)(Object(l.e)(),1)),O=Object(c.a)(d,2),b=O[0],f=O[1],p=v({start:a,end:b}),h=p.loading,m=p.employees,x=p.couriers,g=p.pickers;console.log(m);return h?Object(n.jsx)(j.a,{}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"Orders",children:[Object(n.jsxs)("div",{className:"Orders-Header",children:[Object(n.jsx)("div",{className:"Orders-Header-Button"}),Object(n.jsx)("p",{className:"Orders-Header-Title",children:"Employee statistics"}),Object(n.jsx)("div",{className:"Orders-Header-Button"})]}),Object(n.jsx)("div",{className:"Orders-Middle-Stats",children:Object(n.jsx)("input",{type:"date",className:"Orders-Middle-Stats-Date",value:Object(l.d)(a,"-"),onChange:function(e){return t=e.target.value,console.log(t),void(t&&(s(Object(l.f)(t)),f(Object(u.a)(Object(l.f)(t),1))));var t}})}),Object(n.jsx)(y,{title:"Couriers",employees:x}),Object(n.jsx)(y,{title:"Pickers",employees:g})]})})}))}}]);
//# sourceMappingURL=16.0ded4ad9.chunk.js.map
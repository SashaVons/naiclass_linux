(this["webpackJsonpbairro-admin"]=this["webpackJsonpbairro-admin"]||[]).push([[10],{171:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var c=r(15),n=(r(5),r(183)),i=r(165),d=(r(172),function(e){var t=e.placeholder,r=(e.errors,e.name),d=e.control,s=e.options,o=e.title,a=(e.required,e.onChangeAction),l=e.defaultValue,u=e.multi;return Object(c.jsxs)("div",{style:{width:"100%",marginBottom:24},children:[Object(c.jsx)("p",{className:"Row-Title",children:o}),Object(c.jsx)(i.a,{control:d,style:{width:"100%",marginBottom:24},name:r,render:function(e){var r=e.onChange,i=(e.onBlur,e.value);e.name,e.ref;return Object(c.jsx)(n.a,{className:"Select",onChange:function(e){a&&a(e.value),r(e)},value:i,isMulti:u||!1,placeholder:t,options:s})},defaultValue:l?s.filter((function(e){return e.value===l}))[0]:null})]})})},172:function(e,t,r){},173:function(e,t,r){"use strict";r.d(t,"f",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return j})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return O})),r.d(t,"a",(function(){return f})),r.d(t,"g",(function(){return p}));var c=r(313),n=(r(314),r(315),r(316)),i=r(317),d=r(327),s=r(326),o=r(335),a=r(331),l=function(e){return"string"===typeof e?Object(c.a)(e):e},u=function(e,t){return Object(n.a)(l(e),l(t))},j=function(e,t){return Object(i.a)(l(e),l(t))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return Object(d.a)(l(e),"yyyy".concat(t,"MM").concat(t,"dd"))},O=function(){return Object(s.a)(Object(d.a)(new Date,"yyyy-MM-dd"),"yyyy-MM-dd",new Date)},b=function(e){return Object(a.a)(e,"Asia/Tokyo")},f=function(e,t){var r=Object(o.a)(b(e),b(t));return p(r)},p=function(e){return[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}},175:function(e,t,r){},186:function(e,t,r){},189:function(e,t,r){"use strict";r.r(t),r.d(t,"STATUS_NAMES",(function(){return f}));var c=r(4),n=r.n(c),i=r(52),d=r(15),s=r(5),o=r(19),a=r(51),l=r(29),u=r(165),j=r(71),m=r.n(j),O=(r(186),r(171)),b=(r(175),r(173)),f={"WAIT FOR CARD PAYMENT":"Wait for card payment",DELIVERING:"Ready to pick",ACCEPTED:"Picking",SENT:"Delivering",CLOSE:"Delivered",CANCELED:"Canceled"},p=function(e){var t=e.title,r=e.value,c=e.visible;return void 0===c||c?Object(d.jsxs)("div",{className:"Order-Item-Column",children:[Object(d.jsx)("p",{className:"Order-Item-Form-Title",children:t}),Object(d.jsx)("p",{className:"Order-Item-Form-Text",children:r})]}):null};t.default=Object(a.b)((function(e){return{singleOrder:e.orders.singleOrder,user:e.user.user}}),(function(e){return{fetchSingleOrder:function(t){return e(Object(l.b)(t))},fetchUpdateOrderStatus:function(t,r,c){return e(Object(l.c)(t,r,c))}}}))((function(e){var t,r,c,a,l,j,v=e.fetchSingleOrder,h=e.fetchUpdateOrderStatus,x=e.singleOrder,N=e.user,y=Object(o.i)(),g=Object(u.b)(),T=(g.register,g.handleSubmit),C=g.errors,I=g.setValue,E=g.control,S=y.params.orderId;console.log(x),Object(s.useEffect)((function(){v(S)}),[]);var D=!(null===x||void 0===x?void 0:x.status)||("picker"===N.type?"SENT"===x.status||"CLOSE"===x.status||"CANCELED"===x.status:"dispatcher"!==N.type||"CLOSE"===x.status||"CANCELED"===x.status);Object(s.useEffect)((function(){x&&I("status",{value:x.status,label:f[x.status]})}),[x]);var w=function(){var e=Object(i.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=x.address.streetName.replace(" ","+"),r="https://www.google.com.ua/maps/place/".concat(t,"+").concat(x.address.streetNumber,"+Lisboa"),window.open(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x?Object(d.jsxs)("div",{className:"Order-Item",children:[Object(d.jsxs)("div",{className:"Order-Item-Header",children:[Object(d.jsxs)("p",{className:"Order-Item-Header-Title",style:{display:"flex",flexDirection:"row"},children:["Order","  ","CARD"===x.paymentType&&Object(d.jsx)("p",{style:{color:"green",marginLeft:5},children:"PAID"})]}),Object(d.jsxs)("div",{className:"Order-Item-Header-Button",children:[(null===x||void 0===x?void 0:x.dateOfAccepted)&&Object(d.jsxs)("div",{style:{fontWeight:"bold"},children:["Time of picking - ",function(){if(!(null===x||void 0===x?void 0:x.dateOfAccepted))return null;var e=m()(x.dateOfAccepted),t=m()(x.date);return console.log(e.toDate()),console.log(t.toDate()),Object(b.a)(Object(b.f)(x.dateOfAccepted),Object(b.f)(x.date))}()]}),(null===x||void 0===x?void 0:x.dateOfClose)&&Object(d.jsxs)("div",{style:{fontWeight:"bold"},children:["Time of close - ",(null===x||void 0===x?void 0:x.dateOfClose)?Object(b.a)(Object(b.f)(x.dateOfClose),Object(b.f)(x.date)):null]})]})]}),Object(d.jsxs)("form",{className:"Order-Item-Form",onSubmit:T((function(e){console.log(e)})),children:[Object(d.jsxs)("div",{className:"Order-Item-Row",children:[Object(d.jsx)(p,{title:"Date",value:m()(x.date).format("DD/MM/YY HH:mm")}),Object(d.jsx)(p,{title:"Order number",value:x.orderNumber}),Object(d.jsx)("div",{className:"Order-Item-Column",children:Object(d.jsxs)("div",{style:{width:"100%"},children:["admin"===N.type||"picker"===N.type?Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"Order-Item-Form-Title",children:"Status"}),Object(d.jsx)(O.a,{placeholder:"Status",name:"status",options:[{_id:"DELIVERING",name:"Ready to pick"},{_id:"ACCEPTED",name:"Picking"},{_id:"SENT",name:"Delivering"},{_id:"CLOSE",name:"Delivered"},{_id:"CANCELED",name:"Canceled"}].map((function(e){return{value:e._id,label:e.name}})),errors:C,control:E,onChangeAction:function(e){return h(x._id,e,x.userId)},required:{required:!0}})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"Order-Item-Form-Title",children:"Status"}),Object(d.jsx)("p",{className:"Order-Item-Form-Text",children:f[x.status]})]}),("picker"===N.type||"dispatcher"===N.type)&&Object(d.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",opacity:D?.4:1,cursor:D?void 0:"pointer"},onClick:D?function(){}:function(){"picker"===N.type&&h(x._id,"SENT",x.userId),"dispatcher"===N.type&&h(x._id,"CLOSE",x.userId)},children:Object(d.jsxs)("div",{style:{border:"2px solid #c700cb",borderRadius:10,padding:7,width:"100%",color:"#c700cb"},children:["picker"===N.type&&"Picked","dispatcher"===N.type&&"Delivered"]})})]})})]}),Object(d.jsxs)("div",{className:"Order-Item-Row",children:[Object(d.jsx)(p,{title:"Payment type",value:x.paymentType}),Object(d.jsx)(p,{title:"Subtotal",value:function(){if(x.promocode&&x.promocode.discount){if(!x.promocode.type||"CASH"===x.promocode.type){var e,t=null!==(e=x.price+x.promocode.discount)&&void 0!==e?e:0;return"".concat(t.toFixed(2)," \u20ac")}var r=100*x.price/(100-x.promocode.discount);return"".concat(r.toFixed(2)," \u20ac")}return"".concat(x.price.toFixed(2)," \u20ac")}()}),Object(d.jsx)(p,{title:"Total",value:"".concat(null===(t=x.price)||void 0===t?void 0:t.toFixed(2)," \u20ac")}),Object(d.jsx)(p,{title:"Promocode",value:(null===(r=x.promocode)||void 0===r?void 0:r.code)?"admin"===N.type?x.promocode.code:"Used":"None"})]}),Object(d.jsxs)("div",{className:"Order-Item-Row",children:[Object(d.jsx)(p,{title:"NIF",value:null===x||void 0===x?void 0:x.nif,visible:!!(null===x||void 0===x?void 0:x.nif)}),Object(d.jsx)(p,{title:"User Name",value:x.userName,visible:!!x.userName}),Object(d.jsx)(p,{title:"Phone Number",value:x.phoneNumber,visible:!!x.phoneNumber}),Object(d.jsx)(p,{title:"Comment",value:(null===(c=x.address)||void 0===c?void 0:c.comment)?x.address.comment:"Not added"})]}),Object(d.jsx)("p",{className:"Order-Item-Form-Main",style:{marginBottom:30,marginTop:50},children:"ADDRESS"}),Object(d.jsxs)("div",{className:"Order-Item-Row",children:[Object(d.jsx)(p,{title:"Street Name",value:(null===(a=x.address)||void 0===a?void 0:a.streetName)?x.address.streetName:"Not added"}),Object(d.jsx)(p,{title:"Street Number",value:(null===(l=x.address)||void 0===l?void 0:l.streetNumber)?x.address.streetNumber:"Not added"}),Object(d.jsx)(p,{title:"Floor",value:(null===(j=x.address)||void 0===j?void 0:j.floor)?x.address.floor:"Not added"})]}),Object(d.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:25,cursor:"pointer"},onClick:w,children:Object(d.jsx)("div",{style:{border:"2px solid #c700cb",borderRadius:10,padding:7,color:"#c700cb"},children:"Show on maps"})}),Object(d.jsx)("p",{className:"Order-Item-Form-Main",children:"Products"}),Object(d.jsxs)("table",{className:"Orders-Table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Image"}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:"Storage Info"}),Object(d.jsx)("th",{children:"Count"}),Object(d.jsx)("th",{children:"Price"}),Object(d.jsx)("th",{children:"Priority"})]})}),Object(d.jsx)("tbody",{children:x.products?x.products.sort((function(e,t){var r=e.priority||0,c=t.priority||0;return r<c?-1:r>c?1:0})).map((function(e,t){return e.price?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{align:"left",children:Object(d.jsx)("img",{src:e.images[0],alt:"",className:"Orders-Table-Image"})}),Object(d.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.title_pt}),Object(d.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.storage_info}),Object(d.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.count}),Object(d.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.price.current.toFixed(2)}),Object(d.jsx)("td",{className:"Orders-Table-Title",align:"left",children:e.priority||0})]})}):null})):null})]})]})]}):null}))}}]);
//# sourceMappingURL=10.6e69187e.chunk.js.map
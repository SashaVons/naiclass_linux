(this["webpackJsonpbairro-admin"]=this["webpackJsonpbairro-admin"]||[]).push([[13],{166:function(e,t,r){},168:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(2);function o(e,t){if(null==e)return{};var r,i,o=function(e,t){if(null==e)return{};var r,i,o={},c=Object.keys(e);for(i=0;i<c.length;i++)r=c[i],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)r=c[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=r(15),n=(r(5),r(166),function(e){var t=e.placeholder,r=e.errors,n=e.name,a=e.type,s=e.register,l=e.title,u=e.required,d=e.customStyle,p=e.onChange,g=o(e,["placeholder","errors","name","type","register","title","required","customStyle","onChange"]);return Object(c.jsxs)("div",{className:"Container",style:d,children:[Object(c.jsx)("p",{className:"Row-Title",children:l}),Object(c.jsxs)("div",{className:"Container-Row",children:[Object(c.jsx)("input",Object(i.a)({className:"Container-Row-Input ".concat(r[n]?"Container-Row-Input-Error":""),type:a,step:"0.01",name:n,onChange:function(e){return p?p(e.target.value):null},placeholder:t,ref:s(u)},g)),"checkbox"===a&&Object(c.jsx)("b",{className:"Container-Row-Title",children:t})]}),Object(c.jsx)("div",{className:"Error ".concat(r[n]?"Error-Trans":""),children:r[n]&&Object(c.jsx)("b",{className:"Error-Text",children:"Value required"})})]})})},171:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(15),o=(r(5),r(183)),c=r(165),n=(r(172),function(e){var t=e.placeholder,r=(e.errors,e.name),n=e.control,a=e.options,s=e.title,l=(e.required,e.onChangeAction),u=e.defaultValue,d=e.multi;return Object(i.jsxs)("div",{style:{width:"100%",marginBottom:24},children:[Object(i.jsx)("p",{className:"Row-Title",children:s}),Object(i.jsx)(c.a,{control:n,style:{width:"100%",marginBottom:24},name:r,render:function(e){var r=e.onChange,c=(e.onBlur,e.value);e.name,e.ref;return Object(i.jsx)(o.a,{className:"Select",onChange:function(e){l&&l(e.value),r(e)},value:c,isMulti:d||!1,placeholder:t,options:a})},defaultValue:u?a.filter((function(e){return e.value===u}))[0]:null})]})})},172:function(e,t,r){},256:function(e,t,r){},309:function(e,t,r){"use strict";r.r(t);var i=r(4),o=r.n(i),c=r(52),n=r(41),a=r(15),s=r(5),l=r(51),u=r(165),d=r(168),p=r(54),g=(r(256),r(21)),b=r(19),m=r(171),j=r(24),f=r(20),h=r(10);t.default=Object(l.b)((function(e){return{last_photo:e.image.last_photo,categories:e.category.categories,singleProduct:e.product.singleProduct,singleLoading:e.product.singleLoading,sub_categories:e.sub_category.subCategories,subCategoriesLoading:e.sub_category.loading,categoriesLoading:e.category.loading}}),(function(e){return{fetchCreatePhoto:function(t){return e(Object(p.a)(t))},fetchSingleProduct:function(t){return e(Object(f.d)(t))},fetchAllCategories:function(){return e(Object(g.a)())},fetchAllSubCategories:function(){return e(Object(j.a)())},fetchUpdateProduct:function(t,r,i){return e(Object(f.e)(t,r,i))}}}))((function(e){var t=e.fetchCreatePhoto,r=e.fetchSingleProduct,i=e.fetchAllSubCategories,l=e.fetchAllCategories,p=e.fetchUpdateProduct,g=e.last_photo,j=e.categories,f=e.sub_categories,O=e.subCategoriesLoading,_=(e.categoriesLoading,e.singleLoading),y=e.singleProduct,x=Object(b.i)().params.productId,v=Object(b.g)(),P=Object(s.useState)(!1),N=Object(n.a)(P,2),C=N[0],S=N[1],q=Object(s.useState)(""),E=Object(n.a)(q,2),w=(E[0],E[1],Object(s.useState)(0)),F=Object(n.a)(w,2),I=F[0],T=F[1],L=Object(s.useState)(0),R=Object(n.a)(L,2),k=R[0],A=R[1],B=Object(u.b)(),M=B.register,D=B.handleSubmit,V=B.errors,H=B.setValue,U=B.control;Object(s.useEffect)((function(){r(x),i(),l()}),[]),Object(s.useEffect)((function(){!O&&y&&H("sub_categories",y.sub_category._id)}),[O,y]),console.log("SINGLE:",y),Object(s.useEffect)((function(){y&&j&&f&&(console.log(y),H("title",y.title),H("title_pt",y.title_pt),H("priority",y.priority||0),H("price",y.price.current),H("old_price",y.price.old),T(y.price.current),H("discount",y.price.discount),A(y.price.old),H("sub_categories",y.sub_category.map((function(e){return{value:e._id,label:e.name}}))),H("descriptions",y.descriptions),H("descriptions_pt",y.descriptions_pt),H("life_conditions",y.life_conditions),H("life_conditions_pt",y.life_conditions_pt),H("\u0441omposition",y.\u0441omposition),H("\u0441omposition_pt",y.\u0441omposition_pt),H("storage_info",y.storage_info),H("storage_count",y.storage_count))}),[y,j,f]);var J=function(){var e=Object(c.a)(o.a.mark((function e(r){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.target.files[0],console.log(i),e.next=4,t(i);case 4:S(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"Product-Edit",children:[Object(a.jsxs)("div",{className:"Product-Edit-Header",children:[Object(a.jsx)("p",{className:"Product-Edit-Header-Title",children:"Edit Product"}),Object(a.jsx)("div",{className:"Product-Edit-Header-Button"})]}),f&&j&&!_?Object(a.jsxs)("form",{className:"Product-Edit-Form",onSubmit:D((function(e){p({title:e.title,title_pt:e.title_pt,price:{current:Number(e.price),old:e.old_price?Number(e.old_price):0,discount:e.old_price?Number(Math.floor(100-I/(k/100)))<0?0:Number(Math.floor(100-I/(k/100))):0},descriptions:e.descriptions,descriptions_pt:e.descriptions_pt,images:[C&&g?g:y.images[0]],storage_count:e.storage_count,storage_info:e.storage_info,sub_category:e.sub_categories.map((function(e){return h.b.doc("sub_category/".concat(e.value))})),priority:Number(e.priority)},x,v)})),children:[C?Object(a.jsx)("img",{className:"Product-Edit-Form-Selected-Image",src:g,alt:""}):y?Object(a.jsx)("img",{className:"Product-Edit-Form-Selected-Image",src:y.images[0],alt:""}):Object(a.jsx)("div",{className:"Product-Edit-Form-Image-Empty",children:Object(a.jsx)("p",{children:"Image not added"})}),Object(a.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",className:"Product-Edit-Form-Image",onChange:J}),Object(a.jsx)(d.a,{title:"Title",placeholder:"Title",name:"title",type:"text",errors:V,register:M,required:{required:!0}}),Object(a.jsx)(d.a,{title:"Portugal Title",placeholder:"Portugal Title",name:"title_pt",type:"text",errors:V,register:M,required:{required:!0}}),Object(a.jsx)(d.a,{title:"Priority number",placeholder:"Priority number",name:"priority",type:"number",errors:V,register:M,required:{required:!0}}),Object(a.jsxs)("div",{className:"Product-Edit-Form-Row",children:[Object(a.jsx)(d.a,{title:"Current price",customStyle:{marginRight:"20px"},placeholder:"Current Price",name:"price",type:"number",errors:V,register:M,onChange:function(e){return T(e)},required:{required:!0}}),Object(a.jsx)(d.a,{title:"Old price",placeholder:"Old Price",name:"old_price",type:"number",errors:V,register:M,onChange:function(e){return A(e)},required:{}})]}),Object(a.jsxs)("p",{className:"Product-Edit-Form-Price",children:["Finally discount:",k?Number(Math.floor(100-I/(k/100)))<0?0:Number(Math.floor(100-I/(k/100))):0]}),Object(a.jsx)(d.a,{title:"Storage count",placeholder:"Storage Count",name:"storage_count",type:"number",errors:V,register:M,required:{required:!0}}),Object(a.jsx)(d.a,{title:"Storage info",placeholder:"Storage Info",name:"storage_info",type:"text",errors:V,register:M,required:{required:!0}}),Object(a.jsx)(m.a,{title:"Sub Categories(Firstly select category)",placeholder:"Sub Categories(Firstly select category)",name:"sub_categories",options:f.map((function(e){return{value:e._id,label:e.name}})),errors:V,control:U,multi:!0,required:{required:!0}}),Object(a.jsx)(d.a,{title:"Descriptions",placeholder:"Descriptions",name:"descriptions",type:"text",errors:V,register:M,required:{required:!0}}),Object(a.jsx)(d.a,{title:"Portugal Descriptions",placeholder:"Portugal Descriptions",name:"descriptions_pt",type:"text",errors:V,register:M,required:{required:!0}}),Object(a.jsx)("input",{type:"submit",className:"Product-Edit-Form-Button",value:"Update"})]}):null]})}))}}]);
//# sourceMappingURL=13.36320c2a.chunk.js.map
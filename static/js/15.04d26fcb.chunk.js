(this["webpackJsonpbairro-admin"]=this["webpackJsonpbairro-admin"]||[]).push([[15],{170:function(e,t,c){"use strict";c.d(t,"a",(function(){return u}));var n=c(15),a=(c(5),c(325)),r=c(333),s=c(301),i=c(299),o=c(300),l=c(297),u=function(e){var t=e.title,c=e.content,u=e.show,d=e.setShow,j=e.actionOnSuccess;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(r.a,{open:u,onClose:function(){return d(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(l.a,{id:"alert-dialog-title",children:t}),c?Object(n.jsx)(i.a,{children:Object(n.jsx)(o.a,{id:"alert-dialog-description",children:c})}):null,Object(n.jsxs)(s.a,{children:[Object(n.jsx)(a.a,{onClick:function(){return d(!1)},color:"primary",children:"Cancel"}),Object(n.jsx)(a.a,{onClick:function(){j(),d(!1)},color:"primary",autoFocus:!0,children:"Ok"})]})]})})}},175:function(e,t,c){},194:function(e,t,c){"use strict";var n=c(41),a=c(5),r=c(19);t.a=function(e){var t=new URLSearchParams(Object(r.h)().search),c=Object(r.g)(),s=Object(a.useState)(null),i=Object(n.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(0),d=Object(n.a)(u,2),j=d[0],b=d[1],O=Object(a.useState)(!1),h=Object(n.a)(O,2),f=h[0],g=h[1],x=Object(a.useState)(0),m=Object(n.a)(x,2),p=m[0],v=m[1],P=Object(a.useState)([]),S=Object(n.a)(P,2),y=S[0],N=S[1];Object(a.useEffect)((function(){if(t&&!f){var e=t.get("page"),c=Number(e);b(isNaN(c)?0:c>0?c-1:c),g(!0)}}),[t,f]),Object(a.useEffect)((function(){if(e.countItems){l(null);var t=e.countItems/e.maxItemsOnPage;if(j>t)return void b(0);for(var c=j*e.maxItemsOnPage+e.maxItemsOnPage,n=j*e.maxItemsOnPage,a=c>e.countItems?e.countItems-1:c,r=[],s=0;s<t;s++)r.push(s+1);v(Number(t.toFixed(0))),N(r),l({begin:n,end:a})}}),[j,e.maxItemsOnPage,e.countItems]);return{actions:{setPage:function(t){c.push("".concat(e.baseUrl,"?page=").concat(t)),g(!1)}},loading:!o,page:j,indexes:o,countPages:p,arrayPages:y}}},195:function(e,t,c){"use strict";var n=c(15);c(5),c(196);t.a=function(e){return Object(n.jsx)("div",{className:"Pagination-Wrapper",children:e.pages.map((function(t){return Object(n.jsx)("div",{className:"Pagination-Block",style:{opacity:t-1===e.selectedPage?1:.3},onClick:function(){return e.onChange(t)},children:t})}))})}},196:function(e,t,c){},332:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(4),r=c.n(a),s=c(52),i=c(41),o=c(15),l=c(5),u=c(51),d=c(19),j=c(50),b=c(159),O=(c(175),c(170)),h=c(325),f=c(333),g=c(301),x=c(299),m=c(323),p=c(297),v=function(e){var t=e.title,c=e.show,n=e.setShow,a=e.actionOnSuccess,r=Object(l.useState)("0"),s=Object(i.a)(r,2),u=s[0],d=s[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(f.a,{open:c,onClose:function(){return n(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(o.jsx)(p.a,{id:"alert-dialog-title",children:t}),Object(o.jsx)(x.a,{children:Object(o.jsx)(m.a,{id:"standard-basic",label:"Amount:",variant:"standard",type:"number",onChange:function(e){return d(e.target.value)}})}),Object(o.jsxs)(g.a,{children:[Object(o.jsx)(h.a,{onClick:function(){return n(!1)},color:"primary",children:"Cancel"}),Object(o.jsx)(h.a,{onClick:function(){a(Number(u)),n(!1)},color:"primary",autoFocus:!0,children:"Ok"})]})]})})},P=c(252),S=c.n(P),y=c(20),N=c(194),w=function(e){var t=Object(u.c)(),c=Object(u.d)((function(e){return{products:e.product.products}})).products,n=Object(l.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1];Object(l.useEffect)((function(){t(Object(y.a)())}),[]),Object(l.useEffect)((function(){if(s([]),e&&c){var t=e.name,n=e.zero;if(!(null===t||void 0===t?void 0:t.length)&&!n)return void s(c);var a=c.filter((function(e){return!(null===t||void 0===t?void 0:t.length)||(o(e.title,t)||o(e.title_pt,t))})).filter((function(e){return!n||e.storage_count<=0}));console.log("new:",a.length),s(a)}!e&&c&&s(c)}),[e,c]);var o=function(e,t){for(var c=e.toLocaleLowerCase(),n=t.toLocaleLowerCase(),a=[],r=!0,s=0;s<c.length;s++){r=!0;for(var i=0;i<n.length;i++)if(c[s+i]!==n[i]){r=!1;break}r&&a.push(s)}return a.length>0};return{loading:"undefined"===typeof c,products:r,actions:{reload:function(){return t(Object(y.a)())}}}},T=c(195),C=function(e,t){var c=e.priority||0,n=t.priority||0;return c<n?-1:c>n?1:0};t.default=Object(u.b)((function(e){return{products:e.product.products,user:e.user.user}}),(function(e){return{fetchAllProducts:function(){return e(Object(y.a)())},fetchDeleteProduct:function(t){return e(Object(y.c)(t))},fetchUpdateProduct:function(t,c,n,a){return e(Object(y.e)(t,c,n,a))}}}))((function(e){var t,c=e.user,a=e.fetchAllProducts,u=e.fetchDeleteProduct,h=e.fetchUpdateProduct,f=Object(d.i)(),g=Object(d.g)(),x=Object(l.useState)(!1),m=Object(i.a)(x,2),p=m[0],P=m[1],y=Object(l.useState)(!1),I=Object(i.a)(y,2),k=I[0],_=I[1],F=Object(l.useState)(!1),D=Object(i.a)(F,2),E=D[0],H=D[1],L=Object(l.useState)(""),U=Object(i.a)(L,2),A=U[0],B=U[1],z=Object(l.useState)(null),J=Object(i.a)(z,2),R=J[0],W=J[1],Y=Object(l.useState)(0),q=Object(i.a)(Y,2),G=q[0],K=q[1],M=Object(l.useState)(!1),Q=Object(i.a)(M,2),V=Q[0],X=Q[1],Z=w({zero:V,name:A}).products,$=Object(N.a)({maxItemsOnPage:20,countItems:null!==(t=null===Z||void 0===Z?void 0:Z.length)&&void 0!==t?t:0,baseUrl:"/cabinet/products"}),ee=$.actions,te=$.page,ce=$.loading,ne=$.indexes,ae=$.arrayPages;Object(l.useEffect)((function(){a()}),[]);var re=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(!V),console.log("\ud83c\udfaf\ud83c\udfaf\ud83c\udfaf\ud83c\udfaf - DONE - \ud83c\udfaf\ud83c\udfaf\ud83c\udfaf\ud83c\udfaf");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a,{title:"Do you want delete this product?",show:p,actionOnSuccess:function(){return u(Z[G]._id)},setShow:P}),Object(o.jsx)(v,{title:"Input amount please:",show:E,actionOnSuccess:function(e){if(!R)return null;h(Object(n.a)(Object(n.a)({},R),{},{storage_count:e}),R._id,g,!0),a()},setShow:H}),Object(o.jsx)(O.a,{title:"You want change stock to 0?",show:k,actionOnSuccess:function(){if(!R)return null;h(Object(n.a)(Object(n.a)({},R),{},{storage_count:0}),R._id,g,!0),a()},setShow:_}),Object(o.jsxs)("div",{className:"Products",children:[Object(o.jsxs)("div",{className:"Products-Header",children:[Object(o.jsx)("div",{className:"Products-Header-Button"}),Object(o.jsx)("p",{className:"Products-Header-Title",children:"Products"}),Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(o.jsxs)("div",{className:"Products-Filter",onClick:re,children:[V?" Hide":"Show"," count 0"]}),Object(o.jsx)(j.b,{className:"Products-Header-Button",to:"".concat(f.url,"/create"),children:Object(o.jsx)(b.a,{className:"Products-Header-Button-Icon",children:"add_circle_outline"})})]})]}),Object(o.jsx)("p",{className:"Search-Input-Title",children:"Search"}),Object(o.jsx)("input",{className:"Search-Input",onChange:function(e){return B(e.target.value)}}),Object(o.jsxs)("table",{className:"Products-Table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Image"}),Object(o.jsx)("th",{children:"Title"}),Object(o.jsx)("th",{children:"Storage Count"}),Object(o.jsx)("th",{children:"Sub Category"}),Object(o.jsx)("th",{children:"Storage Info"}),Object(o.jsx)("th",{children:"Priority"}),Object(o.jsx)("th",{children:"Price"}),Object(o.jsx)("th",{children:"Discount"}),Object(o.jsx)("th",{children:"Action"})]})}),Object(o.jsx)("tbody",{children:Z&&!ce?Z.sort(C).slice(null===ne||void 0===ne?void 0:ne.begin,(null===ne||void 0===ne?void 0:ne.end)+1).map((function(e,t){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{align:"left",children:Object(o.jsx)("img",{src:e.images[0],className:"Products-Table-Image",alt:""})}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:e.title_pt}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:e.storage_count}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:e.sub_category.map((function(t,c){return"".concat(t.name).concat(e.sub_category.length!==c+1?", ":"")}))}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:e.storage_info}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:"".concat(e.priority||0)}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:"".concat(e.price.current," \u20ac")}),Object(o.jsx)("td",{className:"Products-Table-Title",align:"left",children:"".concat(e.price.discount,"%")}),Object(o.jsxs)("td",{align:"right",children:["admin"===c.type&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(j.b,{to:"".concat(f.url,"/edit/").concat(e._id),children:Object(o.jsx)(b.a,{className:"Products-Table-Edit",children:"edit"})}),Object(o.jsx)("div",{onClick:function(){K(t),P(!0)},children:Object(o.jsx)(b.a,{className:"Products-Table-Delete",children:"delete"})})]}),"picker"===c.type&&Object(o.jsx)(S.a,{checked:e.storage_count>0,onChange:function(t){t||(W(e),_(!0)),t&&(W(e),H(!0))}})]})]},t)})})):null})]}),Object(o.jsx)(T.a,{pages:ae,selectedPage:te,onChange:function(e){return ee.setPage(e)}})]})]})}))}}]);
//# sourceMappingURL=15.04d26fcb.chunk.js.map